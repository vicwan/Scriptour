# Linux 笔记

### 文件类型

- 普通文件 (regular file)
  - 纯文本文件(ASCII): 这是 Linux 系统中最多的一种文件类型;
  - 二进制文件(binary): 例如指令`cat` 就是一个二进制文件;
  - 数据文件(data): 有些程序在运行的过程当中会读取某些特定格式的文件. 举例来说, 我们的 Linux 在使用者登录时, 都会将登录的资料记录在 `/var/log/wtmp `这个文件内, 该文件就是个 _data file_;
- 目录 (directory)
- 链接文件 (link): 类似 windows 的快捷方式, 第一个属性为 `l`
- 设备文件 (device): 与系统周边及存储相关的一些文件, 通常都集中在 `/dev` 这个目录下. 通常又分为两种:
  - 区块设备文件 (block) : 就是一些存储资料, 以提供系统随机存取的周边设备. 如硬盘, 软盘等. 用 `b` 表示;
  - 字符设备文件 (character): 即串行端口的接口设备，例如键盘、鼠标等等。第一个属性为 `c`;
- 套接字文件 (sockets): 这类文件通常用在网络数据连接。可以启动一个程序来监听客户端的要求，客户端就可以通过套接字来进行数据通信。第一个属性为`s`，最常在 `/var/run`目录中看到这种文件类型 ;
- 管道文件 (FIFO, pipe): FIFO也是一种特殊的文件类型，它主要的目的是，解决多个程序同时存取一个文件所造成的错误。FIFO是first-in-first-out(先进先出)的缩写。第一个属性为 `p`;

### 连接文件的硬连接和软连接(符号连接)

两种方式创建 `file1` 的连接文件:

- ln file1 file2 (硬连接)
- ln -s file1 file3 (软连接)

两种连接的区别 (基本就是指针指向对象区域的概念)

- 硬连接相当于 file1 和 file2 都指向同一个文件区域, 只有当两个文件均被删除的时候, 文件才会真正被删除;
- 软连接相当于 file3 指向 file1, 但是真正的文件区域只有 file1 指向. 所以删除 file3 不会影响任何东西. 而删除 file1 则 file3 也失效了, 即使该文件没有被真正删除.


### 文件目录配置依据

标准就是 FHS ( Filesystem Hierarchy Standard ). 这个标准的意义在于: 让使用者可以了解到已安装软件通常放置于哪个目录下.

|                    | 可分享的( shareable)       | 不可分享的( unshareable) |
| ------------------ | -------------------------- | ------------------------ |
| 不变的(static)     | /usr (软件存放位置)        | /etc (配置文件)          |
|                    | /opt (第三方软件)          | /boot (开机与核心文件)   |
| 可变动的(variable) | /var/mail (使用者邮件邮箱) | /var/run (程序相关)      |
|                    | /var/spool/news (新闻组)   | /var/lock (程序相关)     |

- 可分享的: 可以分享给其他系统挂载使用的目录, 所以包括执行文件与用户的邮件等数据, 是能够分享给网络上其他主机挂载用的目录.
- 不可分享的: 自己机器上面运作的装置文件或者是与程序有关的 socket 文件等, 由于仅与自身机器有关, 所以当然就不适合分享给其他主机了.
- 不变的: 有些数据是不会经常变动的, 跟随者 distribution 而不变动. 例如函数库, 文件说明文件, 系统管理员所管理的主机服务配置文件等等.
- 可变动的: 经常改变的数据, 例如登录文件, 一般用户可自行接收的新闻组等.

事实上, FHS 针对目录树架构仅定义出三层目录底下应该放置什么数据而已, 分别是底下这三个目录的定义:

- / (root 根目录): 与开机系统有关;
- /usr (unix software resource): 与软件安装/执行有关;
- /var (variable): 与系统运作过程有关.

> 根目录 (/) 的意义与内容: 根目录是整个系统最重要的一个目录. 不仅因为所有的目录都是又根目录派生出来, 而且根目录与系统的开机/还原/系统修复等动作有关. 由于根目录如此重要, 因此在 FHS 的要求方面, 根目录不要放在非常大的分区槽内, 因为越大的分区槽你越会放入越多的数据, 如此一来根目录所在的分区槽就可能会有较多发生错误的机会.
>
> 因此 FHS 标准建议: 根目录(/)所在分区槽应该越小越好, 且应用程序所安装的软件最好不要与根目录放在同一个分区槽内, 保持根目录越小越好. 如此不但效能较佳, 根目录所在的文件系统也较不容易发生问题.

